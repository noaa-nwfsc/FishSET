<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="FishSET">
<title> • FishSET</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><link href="../../extra.css" rel="stylesheet">
<meta property="og:title" content="">
<meta property="og:description" content="FishSET">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../../index.html">FishSET</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.8</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../../articles/FishSET_FunctionList.html">FishSET R package functions</a>
    <a class="dropdown-item" href="../../articles/FishSET_GUI_Quickstart_Guide.html">FishSET GUI Quickstart Guide</a>
    <a class="dropdown-item" href="../../articles/RconsoleVignette/02-Data.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../../articles/RconsoleVignette/03-DataExploration.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../../articles/RconsoleVignette/04-Spatial.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../../articles/RconsoleVignette/05-DataCreation.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../../articles/RconsoleVignette/06-Modeling.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../../articles/RconsoleVignette/07-Policy_Welfare.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../../articles/RconsoleVignette/08_reporting.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../../articles/RconsoleVignette/index.html">Using FishSET in the RConsole</a>
    <a class="dropdown-item" href="../../articles/scallop-example.html">scallop-example</a>
    <a class="dropdown-item" href="../../articles/scallop-mod-example.html">Scallop Conditional Logit Model Example</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../../logo.png" class="logo" alt=""><h1></h1>
            
      
      
      <div class="d-none name"><code>06-Modeling.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="modeling-functions">Modeling Functions<a class="anchor" aria-label="anchor" href="#modeling-functions"></a>
</h2>
<div class="section level3">
<h3 id="modeling-functions-1">Modeling functions<a class="anchor" aria-label="anchor" href="#modeling-functions-1"></a>
</h3>
<p>Model development in FishSET requires preparing the data and defining
model parameters. This section details the required and optional data,
model choices, and model output evaluation functions.</p>
<p>Generate necessary data</p>
<pre><code>create_startingloc()        Starting location variable.         
create_alternative_choice() Define alternative fishing choices.   
create_expections()         Define expected catch/revenue matrix.   </code></pre>
<p>Check data</p>
<pre><code>check_model_data()          Check model data for possible issues with data.</code></pre>
<p>Design model</p>
<pre><code>make_model_design()         Make model design.                      
discretefish_subroutine()   Run model.                              </code></pre>
<p>Assess model output</p>
<pre><code>globalcheck_view()          Model error.
model_out_view()            Model output.   
Metrics model_fit()         Model comparison.
select_model()              Select best model.  </code></pre>
<p>###Generate necessary data All models require catch data, data on the
chosen fishing location (choice), and a distance matrix. Price data,
location when choice of where to fish next, and expected catch matrices
are required for some models. Additional optional data that interact
with travel distance or vary by location may also be added. These data
and the functions to generate them are outlined next.</p>
<p><strong>Distance matrix</strong><br>
This function returns the matrix of distances between observed and
alternative fishing choices (where they could have fished but did not).
The distance matrix is saved in the model design file in the FishSET
database and pulled when the model run function is called.</p>
<pre><code><span><span class="fu"><a href="../../reference/create_alternative_choice.html">create_alternative_choice</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">project</span>, <span class="va">alt_var</span>, <span class="va">occasion</span>, <span class="va">griddedDat</span>, <span class="va">dist.unit</span>, <span class="va">min.haul</span>, <span class="va">gridfile</span>, <span class="va">cat</span>, <span class="va">lon.dat</span>, <span class="va">lat.dat</span>, <span class="va">hull.polygon</span>, <span class="va">closest.pt</span>, <span class="va">lon.grid</span>, <span class="va">lat.grid</span>, <span class="va">weight.var</span><span class="op">)</span></span></code></pre>
<p>The distance matrix can be generated from the primary haul-level data
(<code>dat</code>) or from gridded data (<code>griddedDat</code>) such
as sea surface temperature. We describe generating the distance matrix
from <code>dat</code> first.</p>
<p><em>From <code>dat</code></em><br>
Define how to find the longitude and latitude for the starting
(<code>occasion</code>) and alternative (<code>alt_var</code>)
locations. Choices are the centroid of the zone where the haul occurred
(<em>“centroid”</em>), a port variable in <code>dat</code> (such as
disembarked port), or paired latitude and longitude variables in
<code>dat</code> such as haul starting location. Distance can be
returned in <em>“miles”</em>, <em>“kilometers”</em>, or
<em>“meters”</em> (<code>dist.unit</code>). Remove zones with
insufficient data by setting <code>min.haul</code> to the minimum number
of hauls required.</p>
<p>If <code>alt_var</code> or <code>occasion</code> are
<em>“centroid”</em> then the centroid of zones must be obtained. If a
centroid table exists in the FishSET database and a zone identifier
variables is in <code>dat</code>, then only <code>gridfile</code> needs
to be defined. <code>gridfile</code> should the name of the gridfile, in
quotes. For example, <code>gridfile = "gridname"</code>. If centroids or
zone assignments must be calculated then <code>gridfile</code>,
<code>cat</code>, <code>lon.dat</code>, and <code>lat.dat</code> must be
specified. <code>hull.polygon</code>, <code>closest.pt</code>,
<code>weight.var</code> are optional <code>lon.grid</code> and
<code>lat.grid</code> must be defined if <code>gridfile</code> is a data
frame. See <code><a href="../../reference/assignment_column.html">assignment_column()</a></code> for more details on optional
arguments.</p>
<p>If <code>occasion</code> is a port variable, a port table containing
the latitude and longitude of ports is required. If a port table does
not exist in the FishSET database run the <code><a href="../../reference/load_port.html">load_port()</a></code>
function before running <code>create_alternative_choice</code>.</p>
<p>If <code>alt_var</code> or <code>occasion</code> are paired longitude
and latitude variables from <code>dat</code> then <code>alt_var</code>
or <code>occasion</code> should be specified as
<em><code>c(lon, lat)</code></em>.<br><br><em>From <code>griddedDat</code></em><br>
Alternatively, the distance matrix can be generated from a gridded
dataset, such as sea surface temperature. In this case, only
<code>dat</code>, <code>project</code>, and <code>griddedDat</code> must
be specified. Columns in the gridded data file must be individual zones
and must match the zone identifier variable in <code>dat</code>. The
gridded data can vary over a second dimension, such as date, but must
match a variable in <code>dat</code>. We recommend saving the gridded
data file to the FishSET database using the <code><a href="../../reference/load_grid.html">load_grid()</a></code>
function.</p>
<p><strong>Expected catch matrix</strong><br>
This function returns the expected catch or revenue matrix for
alternative fishing zones (zones they could have chosen but that the
fisher did not in this choice opportunity). This matrix is required to
run the conditional logit model that utilizes an average revenue
specification.</p>
<pre><code><span><span class="fu"><a href="../../reference/create_expectations.html">create_expectations</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">project</span>, <span class="va">catch</span>, <span class="va">price</span>, <span class="va">defineGroup</span>, <span class="va">temp.var</span>, <span class="va">temporal</span>, <span class="va">calc.method</span>, <span class="va">lag.method</span>, <span class="va">empty.catch</span>, <span class="va">empty.expectation</span>, <span class="va">temp.window</span>, <span class="va">temp.lag</span>, <span class="va">year.lag</span>, <span class="va">dummy.exp</span>, <span class="va">replace.output</span><span class="op">)</span></span></code></pre>
<p>The <code><a href="../../reference/create_expectations.html">create_expectations()</a></code> function requires a catch
variable. To return expected revenue, include a price or value variable
from <code>dat</code>. <code>price</code> is multiplied against catch to
generate revenue. If revenue exists in <code>dat</code> and you wish to
use this revenue instead of price, then <code>catch</code> must be a
vector of 1 of length equal to <code>dat</code>.</p>
<p>Expected catch/revenue can be calculated across the entire dataset
(<code>defineGroup = “fleet”</code>) or within groups and across the
entire record of catch (<code>temp.var = NULL</code>) or can take
variation in catch over time into account. To take temporal patterns in
catch into account, first identify the temporal variable
(<code>temp.var</code>) in <code>dat</code> to use. Next, select whether
to use a sequential (<code>temporal = "sequential"</code>) or daily
timeline (<code>temporal = "daily"</code>). Sequential timeline sorts
data by date but does not take into account that days may be missing.
Daily timeline adds in these dates with NA (missing value). With
sequential timeline, a window size of seven means catch would be the
average over the past seven fishing days. Whereas, with daily timeline,
it would be the average over seven calendar days. <code>year.lag</code>
can be 0 (current year), 1 (previous year’s data), or any other viable
years to go back. Window size (<code>temp.window</code>) is in days and
can be current day (0), a week (7), or any other numeric value.
<code>temp.lag</code> is numeric and in days. For each day <em>x</em> in
<code>temp.var</code>, catch is the average catch across <em>w</em> days
(<code>temp.window</code>) starting <em>d</em> days
(<code>temp.lag</code>) and <em>y</em> years (<code>year.lag</code>)
before <em>x</em>.</p>
<p>Using the specified moving window parameters, a matrix of average
catch is created with <em>zone*group</em> creating rows and
<em><code>date</code></em> the columns. This is the standard average
catch <code>(calc.method = “standardAverage”</code>). Alternatively, you
can use the simple lag regression of the mean
(<code>calc.method = “simpleLag”</code>) which calculates the predicted
value for each zone<code>*</code>group and date given regression
coefficients <em>p</em> for each zone<code>*</code>group. The lag method
(<code>lag.method</code>), can use regression over entire group
(<em>“simple”</em>) or for grouped time periods
(<em>“grouped”</em>).</p>
<p>The expected catch matrix is pulled from the matrix of calculated
catches for each date and zone. The matrix is of dimensions <em>(number
of rows of dat)*(number of alternatives)</em>. Expected catch is filled
out by mapping the calculated catch for each zone given the observed
date (if specified) and group (if specified) in <code>dat</code>. Note
that empty catch values are considered to be times of no fishing
activity and are not included. Values of 0 in the catch variable are
considered times when fishing activity occurred but with no catch. These
zero values are included in calculations. Sparsity in data should be
considered when deciding how to take into account that catch may vary
over time. Check for sparsity with the <code><a href="../../reference/temp_obs_table.html">temp_obs_table()</a></code>
function. A broader window size or using the entire temporal record may
be necessary. Empty catch values and empty expected catch values can be
filled but only on a limited basis as doing so can lead to biased or
misleading results. If there are a lot of empty values, consider
changing the temporal arguments to reduce data sparsity.
<code>empty.catch</code> can be <em>0</em>, the average of all catch
values (<em>“allCatch”</em>”) or the average of grouped catch values
(<em>“groupedCatch”</em>). <code>empty.expectation</code> can be 0 or
1e-04.</p>
<p>The function returns four expected catch or expected revenue matrices
based on predefined window size and lags in days and years and all other
user-defined arguments :</p>
<pre><code>selected temporal arguments
expected catch/revenue based the previous two days (short-term) catch,
expected catch/revenue based the previous seven days (medium-term) catch,
and expected catch/revenue based on the previous years (long-term) catch.</code></pre>
<p><strong>Starting location</strong><br>
The starting location vector is required for the full information model
with Dahl’s correction (<code>logit_correction</code>). The vector is
the zone location of a vessel when the decision of where to fish next
was made. Generally, the first zone of a trip is the departure port.
Create the starting location vector before creating the model design
file (<code><a href="../../reference/make_model_design.html">make_model_design()</a></code>).</p>
<pre><code><span><span class="fu"><a href="../../reference/create_startingloc.html">create_startingloc</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">gridfile</span>, <span class="va">portTable</span>, <span class="va">trip_id</span>, <span class="va">haul_order</span>, <span class="va">starting_port</span>, <span class="va">lon.dat</span>, <span class="va">lat.dat</span>, <span class="va">cat</span>, name <span class="op">=</span> <span class="st">"startingloc"</span>, <span class="va">lon.grid</span>, <span class="va">lat.grid</span><span class="op">)</span></span></code></pre>
<p>The <code><a href="../../reference/create_startingloc.html">create_startingloc()</a></code> function adds a starting
location vector to the dataset (<code>dat</code>).</p>
<p>A zonal identifier variable is required. If zone identifier variable
does not exist, the <code><a href="../../reference/assignment_column.html">assignment_column()</a></code> function is called
to assign starting port locations and haul locations to zones and the
following arguments are required: <code>gridfile</code>,
<code>lon.dat</code>, <code>lat.dat</code>, <code>cat</code>,
<code>lon.grid</code>, <code>lat.grid</code>. See
<code>assignment_column</code> documentation for details.</p>
<p>The first zone is generally the zone of the departure port. The table
containing port latitude and longitudes (<code>portTable</code>) is
required. This should be in the FishSET database. Also required is the
variable in <code>dat</code> containing names of starting ports
(<code>starting_port</code>). <code>trip_id</code> is a variable in
<code>dat</code> containing unique trip identifiers.
<code>haul_order</code> is a variable in <code>dat</code> containing the
order of hauls within trips.</p>
<p><strong>Additional optional data</strong><br><code>vars1</code> is a character string of additional
<em>travel-distance</em> variables to include in the model, such as
vessel characteristics. <code>vars2</code> is a character string of
additional variables to include in the model, wind speed within zones.
These depend on the likelihood. The details of the functions depend on
the likelihood function and are outlined in the <a href="LINK1!">FishSET
Help Manual</a> and likelihood function documentation.</p>
<p>###Model choices Model choices include the likelihood functions,
optimization method, optimization options, and starting parameter
values. These, along with the required and optional data are specified
in the <code>model_design_function()</code>. The model design file is
saved to the FishSET database and called by the
<code><a href="../../reference/discretefish_subroutine.html">discretefish_subroutine()</a></code> function to run the models.</p>
<pre><code><span><span class="fu"><a href="../../reference/make_model_design.html">make_model_design</a></span><span class="op">(</span><span class="va">dat</span>, <span class="va">project</span>, <span class="va">catchID</span>, replace <span class="op">=</span> <span class="cn">TRUE</span>, likelihood <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">initparams</span>, <span class="va">optimOpt</span>, <span class="va">methodname</span>, <span class="va">mod.name</span>, vars1 <span class="op">=</span> <span class="cn">NULL</span>, vars2 <span class="op">=</span> <span class="cn">NULL</span>, priceCol <span class="op">=</span> <span class="cn">NULL</span>, startloc <span class="op">=</span> <span class="cn">NULL</span>, polyn <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../../reference/discretefish_subroutine.html">discretefish_subroutine</a></span><span class="op">(</span><span class="va">project</span>, select.model <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre>
<p>The model design function requires the variable name in
<code>dat</code> containing catch data. The distance and expected
catch/revenue matrices do not have to be specified. They will be pulled
based on <code>project</code> from the FishSET database.
<code>startloc</code> is the name of the variable containing starting
locations, if required. <code>priceCol</code> is optional argument to
specify the variable in <code>dat</code> containing price data. It is
required for the expected profit models (<em>epm_normal, epm_weibull,
epm_lognormal</em>). <code>vars1</code> is a character string of
optional <em>travel-distance</em> variables and <code>vars2</code> is a
character string of optional <em>grid-varying</em> variables. These two
arguments should be <em>NULL</em> if no additional data is being
included. <code>polyn</code> is the correction polynomial degree. It is
required for the <em>logit_correction</em> model.</p>
<p>FishSET allows only one model design file per project. Multiple
models can be added to this file. Models are added on at a time using
the <code><a href="../../reference/make_model_design.html">make_model_design()</a></code> function. Identify individual
models with <code>model.name</code>. Models are added to the model
design file by setting <code>replace = FALSE</code>.
<code>replace = TRUE</code> will remove the existing model design file
and only the currently specified model in
<code><a href="../../reference/make_model_design.html">make_model_design()</a></code> will be in the model design file.</p>
<p>The remaining arguments in <code><a href="../../reference/make_model_design.html">make_model_design()</a></code> are
detailed below.</p>
<p><strong>Likelihood functions (<code>likelihood</code>)</strong></p>
<p>FishSET has six built-in likelihood functions.</p>
<pre><code>Function            Likelihood name                                         Reference
________________________________________________________________________________________________
logit_c             Conditional logit likelihood                              McFadden 1974
logit_avgcat        Average catch multinomial logit procedure                 Abbot and Wilen 2011
logit_correction    Full information model with Dahl’s correction function    Dahl 2002 
epm_normal          Expected profit model with normal catch function          Haynie and Layton 2010
epm_weibull         Expected profit model with Weibull catch function         Haynie and Layton 2010
epm_lognormal       Expected profit model with lognormal catch function       Haynie and Layton 2010</code></pre>
<p>See function documentation or the <a href="LINK!!!">Help Manual</a>
for more details.</p>
<p><strong>Initial parameter values
(<code>initparams</code>)</strong></p>
<p>The number of initial parameter values and the order depend upon the
specified likelihood function and the number of travel-distance and
grid-varying variables included.</p>
<p><em>logit_c</em><br>
Starting parameter values take the order of
<code>c[(alternative-specific parameters), (travel-distance parameters)]</code>.
The length is the <em>number of alternative-specific variables</em> plus
<em>number of travel-distance variables</em>.</p>
<p><em>logit_avgcat</em><br>
Starting parameter values take the order of:
<code>c[(average-catch parameters), (travel-distance parameters)]</code>.
The length is the <em>(number of average-catch variables)*(k-1)</em>
plus the <em>number of travel-distance variables</em>. <code>k</code>
equals the number of alternative fishing choices.</p>
<p><em>logit_correction</em><br>
starting parameter order takes:
<code>c[(marginal utility from catch), (catch-function parameters), (polynomial starting parameters), (travel-distance parameters), (catch sigma)]</code>.
The marginal utility from catch and catch sigma are of length equal to
unity respectively. The catch-function and travel-distance parameters
are of length <em>(number of catch variables)*(k)</em> and <em>number of
cost variables</em> respectively. The number of polynomial interaction
terms is currently set to 2, so given the chosen degree
<code>polyn</code> there should be <em>(((polyn+1)*2)+2)*(k)</em>
polynomial starting parameters, where <code>k</code> equals the number
of alternative fishing choices.</p>
<p><em>epm_normal</em><br>
Starting parameters values take the order of:
<code>c[(catch-function parameters), (travel-distance parameters), (catch sigma(s)), (scale parameter)]</code>.
The catch-function and travel-distance parameters are of length
<em>(number of catch-function variables)*(k)</em> and <em>(number of
travel-distance variables)</em> respectively, where <code>k</code>
equals the number of alternative fishing choices. The catch sigma(s) are
either of length equal to unity or length <code>k</code> if estimating
location-specific catch sigma parameters. The scale parameter is of
length equal to unity.</p>
<p><em>epm_weibull</em><br>
Starting parameter values takes the order of:
<code>c[(catch-function parameters), (travel-distance parameters), (catch sigma(s)), (scale parameter)]</code>.
The catch-function and travel-distance parameters are of length
<em>(number of catch-function variables)*(k)</em> and <em>(number of
travel-distance variables)</em> respectively, where <code>k</code>
equals the number of alternative fishing choices. The catch sigma(s) are
either of length equal to unity or length <code>k</code> if estimating
location-specific catch sigma parameters. The scale parameter is of
length equal to unity.</p>
<p><em>epm_lognormal</em><br>
Starting parameter values takes the order of:
<code>c[(catch-function parameters), (travel-distance parameters), (catch sigma(s)), (scale parameter)]</code>.
The catch-function and travel-distance parameters are of length
<em>(number of catch-function variables)*(k)</em> and <em>(number of
travel-distance variables)</em> respectively, where <code>k</code>
equals the number of alternative fishing choices. The catch sigma(s) are
either of length equal to unity or length <code>k</code> if estimating
location-specific catch sigma parameters. The scale parameter is of
length equal to unity.</p>
<dl>
<dt>Optimization options (<code>optimOpt</code>)</dt>
<dd>
<p>Maximum number of iterations<br>
Relative convergence tolerance<br>
Report frequency<br>
Level of tracing information returned</p>
</dd>
</dl>
<p>As a guide, the optimization function <code>optim</code> in the
<strong>stats</strong> package defaults to 100 for derivative-based
methods, 500 for “Nelder-Mead” and 10000 for “SANN”. The relative
tolerance should be very small. The default is 1e-08. Report frequency
is the frequency of reports such as every 10 iterations for “BFGS” or
every 100 temperatures for “SANN”. Tracing must be 1 or higher for
reports to be returned. Higher values return more details.</p>
<p><strong>Optimization method (<code>methodname</code>)</strong><br>
Choices are “BFGS”, “L-BFGS-B”, “Nelder-Mead”, “Brent”, “CG”, and
“SANN”. Default is “BFGS”.</p>
<p><strong>Running and saving models</strong> To run the defined models,
use <code>discretefish_subroutine(project, select.model = FALSE)</code>.
Each model can take 10 or more minutes to run.</p>
<p>It may be desirable to identify the “best” or preferred models for
future reference. Identifying the “best” model can be done in the
<code><a href="../../reference/discretefish_subroutine.html">discretefish_subroutine()</a></code> function by setting
<code>select.model = TRUE</code> or using the
<code>select_model(project, overwrite_table=FALSE)</code> function. Both
produce a <em>modelChosen</em> table that is saved to the FishSET
database. This table is not used in any functions. R Console</p>
<p>In the R console, an interactive data table can be opened by setting
select.model in discretefish_subroutine() to TRUE or with the
select_model() function. <code><a href="../../reference/select_model.html">select_model()</a></code> The interactive
table contains the name of the model and model measures of fit for each
model. Users can delete models from the table and select the preferred
model by checking the selected box. The table is saved to the FishSET
database with two new columns added, a TRUE/FALSE selected column and
the date it was selected if overwrite_table is TRUE. The table is saved
with the phrase ‘modelChosen’ in the FishSET database. FishSET GUI
Identifying and recording the “best” or preferred model is done by
checking the Selected box next to the desired model in the Measures of
Fit table in the Model Comparison subtab. Click the blue Save Table
button to record this selection. Use the Delete Row button to remove a
model.</p>
<p>###Model output evaluation Output from the model is saved to the
FishSET database in three tables. These tables are saved based on the
project name, table phrase, and the date the model was run in YYMD
format. The model output tables all contain the phrase <em>modelout</em>
and the error output tables all contain <em>ldglobalcheck</em>.</p>
<p>The first table contains the initial global log likelihood, initial
log likelihood for alternative choices, and starting parameters. Use
these for assessing the cause of model errors. The second table contains
information on the model output, such as convergence, standard errors,
and the inverse Hessian matrix. The model comparison or measure of fit
table contains AIC, AIC<sub>c</sub>, BIC, Pseudo R<sup>2</sup>.</p>
<pre> Purpose                       Function                Table Name  
Model Error                 globalcheck_view(x)     <em>project</em>ldglobalcheck<em>YYMD</em>  
Model Output                    model_out_view(x)       <em>project</em>modelout<em>YYMD</em>  
Model Comparison Metrics    model_fit(x)            <em>project</em></pre>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Alan Haynie - NOAA Federal.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
