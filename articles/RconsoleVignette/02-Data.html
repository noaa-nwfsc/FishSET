<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="FishSET">
<title> • FishSET</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../../apple-touch-icon-60x60.png">
<script src="../../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../../pkgdown.js"></script><link href="../../extra.css" rel="stylesheet">
<meta property="og:title" content="">
<meta property="og:description" content="FishSET">
<meta property="og:image" content="/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../../index.html">FishSET</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.8</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../../articles/FishSET_FunctionList.html">FishSET R package functions</a>
    <a class="dropdown-item" href="../../articles/FishSET_GUI_Quickstart_Guide.html">FishSET GUI Quickstart Guide</a>
    <a class="dropdown-item" href="../../articles/RconsoleVignette/02-Data.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../../articles/RconsoleVignette/03-DataExploration.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../../articles/RconsoleVignette/04-Spatial.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../../articles/RconsoleVignette/05-DataCreation.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../../articles/RconsoleVignette/06-Modeling.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../../articles/RconsoleVignette/07-Policy_Welfare.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../../articles/RconsoleVignette/08_reporting.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../../articles/RconsoleVignette/index.html">Using FishSET in the RConsole</a>
    <a class="dropdown-item" href="../../articles/scallop-example.html">Scallop Example</a>
    <a class="dropdown-item" href="../../articles/scallop-mod-example.html">Scallop Conditional Logit Model Example</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../../logo.png" class="logo" alt=""><h1></h1>
            
      
      
      <div class="d-none name"><code>02-Data.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h2>
<div class="section level3">
<h3 id="required-and-optional-data">Required and optional data<a class="anchor" aria-label="anchor" href="#required-and-optional-data"></a>
</h3>
<p>FishSET uses five data types.</p>
<table class="table">
<colgroup>
<col width="20%">
<col width="79%">
</colgroup>
<thead><tr class="header">
<th>File Type</th>
<th>Description</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Primary data</td>
<td>Required. Contains the main data for the model.</td>
</tr>
<tr class="even">
<td>Port data</td>
<td>Required. Contains latitude and longitude locations of ports.</td>
</tr>
<tr class="odd">
<td>Spatial data</td>
<td>Required. File defining boundaries of fishery or regulatory
zones.</td>
</tr>
<tr class="even">
<td>Gridded data</td>
<td>Optional. Contains additional data that varies by two
dimensions.</td>
</tr>
<tr class="odd">
<td></td>
<td>Example, sea surface temperature measure</td>
</tr>
<tr class="even">
<td>Auxiliary data</td>
<td>Optional. Contains additional data to link to the primary data.</td>
</tr>
<tr class="odd">
<td></td>
<td>Example, vessel characteristics.</td>
</tr>
</tbody>
</table>
<p>All optional data files must be linkable to the primary data
file.</p>
<p>Gridded data should link to the fishery or regulatory areas in the
spatial data. Auxilary data must link to a variable in the primary data
table.</p>
<p>FishSET will accept several data formats including:</p>
<ul>
<li>csv files</li>
<li>geojson files</li>
<li>json files</li>
<li>matlab files</li>
<li>R files<br>
</li>
<li>shape files</li>
<li>spss files</li>
<li>stata files</li>
<li>txt files</li>
<li>xls/xlsx files</li>
</ul>
<p>Details on the different data types are detailed in the <a href="https://docs.google.com/document/d/1dzXsVt5iWcAQooDDXRJ3XyMoqnSmpZOqirU_f_PnQUM/edit#heading=h.36sb14g0441y" class="external-link">Data
Types</a> section of the FishSET manual.</p>
</div>
<div class="section level3">
<h3 id="loading-and-reading-data">Loading and reading data<a class="anchor" aria-label="anchor" href="#loading-and-reading-data"></a>
</h3>
<div class="section level4">
<h4 id="loading-data-to-the-fishset-database">Loading data to the FishSET database<a class="anchor" aria-label="anchor" href="#loading-data-to-the-fishset-database"></a>
</h4>
<p>All data should be saved to the FishSET database. Doing so ensures
that data for a project are stored together.</p>
<p>The <em>load</em> functions check that the data file can be saved to
the FishSET database and, if all checks pass, saves the data file to the
FishSET database.</p>
<p>When the primary data is saved, two versions of the data are created,
a raw table with the original data and a working table on which all
analyses will be conducted. The working table will also be available in
the global environment. Revised data can be saved as interim tables in
the database along with a “finalized” data table (data table used for
models).</p>
<div class="section level5">
<h5 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a>
</h5>
<pre><code> load_maindata() Primary data file. 
 load_port()     Port data file. 
 load_aux ()     Auxiliary data file. 
 load_grid()     Gridded data file.</code></pre>
</div>
<div class="section level5">
<h5 id="function-details">Function details<a class="anchor" aria-label="anchor" href="#function-details"></a>
</h5>
<p><code>load_maindata(dat, project, over_write = TRUE, compare = FALSE, y = NULL)</code>
read in a data file, then parses it, and finallys saves the data table
to the FishSET database if no errors are found. The function calls the
<code>data_verification</code> function to check for common data quality
issues and that latitude and longitude are defined in <code>dat</code>.
If no issues are found, the data is saved in the FishSET database for
the <code>project</code> as <code>projectMainDataTable</code> and loaded
into the working environment. If <code>over_write =TRUE</code>, the
existing data table for the project, if exists in the FishSET database,
will be overwritten. If <code>compare = TRUE</code> the
<code>fishset_compare</code> function is called and <code>dat</code> is
compared with <code>y</code>, a previously saved version of
<code>dat</code>.</p>
<p><code>load_port</code></p>
<p><code>load_spatial</code></p>
<p><code>load_aux</code></p>
<p><code>load_grid</code></p>
<blockquote>
<p>“Add details about loading port, spatial , auxiliary, and gridded
files.”</p>
</blockquote>
</div>
</div>
<div class="section level4">
<h4 id="reading-data-into-r">Reading data into R<a class="anchor" aria-label="anchor" href="#reading-data-into-r"></a>
</h4>
<p>Data can also be read into R without saving it to the FishSET
database. This function should only be used to view and evaluate data
tables. If the data is going to be used in FishSET it should be loaded
into the FishSET database.</p>
<p>To read data files into the working environment use:</p>
<pre><code> read_dat(x, data.type = NULL, is.map = F, ...). </code></pre>
<div class="section level5">
<h5 id="function-details-1">Function details<a class="anchor" aria-label="anchor" href="#function-details-1"></a>
</h5>
<p><code>read_dat(x, data.type=NULL, is.map = FALSE, drv = NULL, dbname = NULL, user = NULL, password = NULL, ...)</code>
import data from local file directory or webpage into the R environment.
<code>x</code>is the name and path, or web address, of the dataset to be
read in. <code>data.type</code> is the file extension. It is optional as
the function will attempt to detect the file extension.
<code>data.type</code> must be defined if <code>x</code> is the path to
a shape folder, if <code>x</code> is a Google spreadsheet
(<code>data.type = 'google')</code>, or if the correct extension cannot
be derived from <code>x</code>. Set <code>is.map = TRUE</code> only for
spatial files in a .json file extension. For sql files, additional
arguments may be required, including the database driver
(<code>drv</code>), the database name (<code>dbname</code>), and user
name (<code>user</code>) and password (<code>password</code>) for the
SQL database.</p>
<p><code><a href="../../reference/read_dat.html">read_dat()</a></code> is flexible and will accommodate several data
extensions and additional format-specific arguments. It is a wrapper
function that calls a file extension-specific function to read in the
data. <code>x</code> is the name and path of the dataset to be read in.
<code>data.type</code> is optional argument to specify the file
extension. If <code>data.type</code> is not specified, the detected data
extension in <code>x</code> will be used. <code>is.map</code> is a
logical argument specifying if <code>x</code> is a spatial data file.
is.map must be set to TRUE if a spatial data file is not in a geojson or
shape file. <code>...</code> is used to add additional
extension-specific arguments. See function documentation for more
details.</p>
</div>
</div>
<div class="section level4">
<h4 id="loading-data-from-fishset-database-into-the-the-working-environment">Loading data from FishSET database into the the working
environment<a class="anchor" aria-label="anchor" href="#loading-data-from-fishset-database-into-the-the-working-environment"></a>
</h4>
<p>Data saved to the FishSET database can be reloaded into the working
environment using</p>
<pre><code> load_data(project, name=NULL). </code></pre>
<p>Specify the project name (<code>project</code>) and, optionally, the
table name (<code>name</code>). <code>name</code> is optional and is
used to specify a specific version of the data table. For example,</p>
<pre><code><span> <span class="fu"><a href="../../reference/load_data.html">load_data</a></span><span class="op">(</span><span class="st">"pollock"</span>, name<span class="op">=</span><span class="st">"pollockMainDataTable20200101"</span><span class="op">)</span>   </span></code></pre>
<p>loads the primary data from project <em>pollock</em> that was saved
on January 1st, 2020. If <code>name</code> is NULL, the undated working
table is pulled.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">##Load in the data from the pollock project</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">FishSET</span><span class="op">)</span></span>
<span><span class="fu"><a href="../../reference/load_data.html">load_data</a></span><span class="op">(</span><span class="st">"pollock"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="merging-gridded-and-auxiliary-data-with-the-primary-data">Merging gridded and auxiliary data with the primary data<a class="anchor" aria-label="anchor" href="#merging-gridded-and-auxiliary-data-with-the-primary-data"></a>
</h3>
<p>Secondary data (auxiliary, port, gridded) can be merged into the
primary dataset. The default method to merge is to use a left join; all
columns and rows from the primary dataset are kept whereas only matching
columns and rows from the secondary table are joined. Although all
secondary data types can be merged into the primary day, generally only
auxiliary data (such as vessel characteristics) will need to be
merged.</p>
<div class="section level5">
<h5 id="functions-1">Functions<a class="anchor" aria-label="anchor" href="#functions-1"></a>
</h5>
<pre><code>merge_dat()   Merge secondary data into the primary data tahble
split_dat()   Split and save secondary data from the primary data table</code></pre>
</div>
<div class="section level5">
<h5 id="function-details-2">Function details<a class="anchor" aria-label="anchor" href="#function-details-2"></a>
</h5>
<p><code>merge_dat(dat, other, project, main_key, other_key, other_type = NULL, merge_type = "left")</code>
merges secondary data (<code>other</code>) to the primary data
(<code>dat</code>) based on one or more variables for <code>dat</code>
(<code>main_key</code>) and <code>other</code> (<code>other_key</code>).
If more than one variable is being used for merging, include as a list.
Variable names do not have to be the same between <code>main_key</code>
and <code>other_key</code> but they must be included in the same order.
<code>other_type</code> is optional and defines the data type of the
secondary data (“aux”, “grid”, “spat”, “port”). <code>merge_type</code>
can be “left” or “full”. “left” keeps all columns and rows in
<code>dat</code> but only the rows from <code>other</code> in which the
column values match column values in <code>dat</code>. “full” keeps all
rows of both <code>dat</code> and <code>other.</code> “left” merge is
preferred as using “full” can result in a larger frequency of missing
data if the secondary data contains observations beyond the scope of
<code>dat</code>. For example, <code>dat</code> contains catch data only
on catcher vessels but other contains vessel characteristics for catcher
vessels, mothership vessels, and catch processor vessels.</p>
<p><code>split_dat(dat, aux = NULL, project, split_by = NULL, key, output = "main")</code>
separates secondary data (auxiliary, gridded, or port data) from the
MainDatatable. Identify data to remove from <code>dat</code> using an
existing secondary data table or list of column names. If
<code>aux</code> is specified, the column names in <code>dat</code> that
match the column names in <code>aux</code> are separated from
<code>dat</code>. If <code>aux = NULL</code> and <code>split_by</code>
is a list, then column names in <code>dat</code> matching
<code>split_by</code> are separated from <code>dat</code>.
<code>key</code> is the columns that link <code>dat</code> and
<code>aux.</code> If <code>aux</code> is null then <code>key</code>
should be a column name from <code>split_by</code>. The function can
return just the primary data (<code>output = “main”</code>), just the
separated table (<code>output = “aux”</code>), or both, in a list
(<code>output = “both”</code>).</p>
</div>
</div>
<div class="section level3">
<h3 id="working-in-the-fishset-database">Working in the FishSET database<a class="anchor" aria-label="anchor" href="#working-in-the-fishset-database"></a>
</h3>
<p>The functions in this section interface with the FishSET database to
display the requested output in the R Console. The functions are
wrappers for functions in the <strong>DBI</strong> package. They allow
users to focus on the data and not on managing the database or learning
SQL.</p>
<p>Basic functions:</p>
<pre><code> tables_database(project)        View list of all tables in the FishSET database for the project.
 list_MainDataTables(project)      View list of MainDataTables in FishSET database for the project.
 list_PortTables(project)          View list of PortTables in FishSET database for the project.
 list_logs(project)                View list of all log files for the project.
 table_fields(table, project)    View fields in specified table for the project.
 table_view(table, project)      Display specified table for the project.
 table_exists(table, project)      Check if table exists in the FishSET database for the project.
 table_remove(table, project)      Remove table from the FishSET database for the project.</code></pre>
<p>Model output files can be viewed in the FishSET database using:</p>
<pre><code> globalcheck_view(table, project)  View error output discrete choice models for the project
 model_out_view(project)    Load discrete choice model output for the project</code></pre>
</div>
<div class="section level3">
<h3 id="metadata">Metadata<a class="anchor" aria-label="anchor" href="#metadata"></a>
</h3>
<blockquote>
<p>“This needs to be detailed”</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="data-management-functions">Data management functions<a class="anchor" aria-label="anchor" href="#data-management-functions"></a>
</h3>
<p>Data should, at a minimum, be checked for entry errors and errors
resulting from data import and conversion. Users should also investigate
and summarize the data to understand potential data and statistical
problems.</p>
<p>FishSET provides a number of statistical and graphic functions for
evaluating data quality. These functions focus on issues that are most
likely to affect model convergence and model performance. They do not
cover all potential data quality issues that exist in your data.</p>
<div class="section level4">
<h4 id="functions-2">Functions<a class="anchor" aria-label="anchor" href="#functions-2"></a>
</h4>
<div class="section level5">
<h5 id="visualizing-the-data">Visualizing the data<a class="anchor" aria-label="anchor" href="#visualizing-the-data"></a>
</h5>
<pre><code> summary_stats()    Table with basic summary statistics.
 spatial_hist()     Histogram of lat and lon by grouping variable.
 spatial_summary()  Line plots of selected variable against date and zone.
 map_plot()         Static map of haul locations.</code></pre>
</div>
<div class="section level5">
<h5 id="subsetting-the-data">Subsetting the data<a class="anchor" aria-label="anchor" href="#subsetting-the-data"></a>
</h5>
<pre><code> select_vars()      Select variables to add back into the working dataset. 
 add_vars()         Add variables from `select_vars` into primary dataset.</code></pre>
</div>
<div class="section level5">
<h5 id="checking-for-outliers">Checking for outliers<a class="anchor" aria-label="anchor" href="#checking-for-outliers"></a>
</h5>
<p><code>outlier_boxplot(dat, project, x = NULL)</code> returns a
box-and-whisker plot of all numeric variables in <code>dat</code>. Use
<code>x</code> to define a set of variables to assess. This function
helps to identify which variables potentially contain outlier variables
and should be run before outlier_table() and outlier_plot() functions,
which can be applied to only one variable at a time.</p>
<pre><code> outlier_table()    Returns table with quantiles for all numeric variables in the data table.
 outlier_plot()     Returns a plot of the selected variable.
 outlier_remove()   Returns modified data set where outliers have been removed.</code></pre>
</div>
<div class="section level5">
<h5 id="checking-for-empty-variables-unique-rows-nas-and-nans">Checking for empty variables, unique rows, NAs, and NaNs<a class="anchor" aria-label="anchor" href="#checking-for-empty-variables-unique-rows-nas-and-nans"></a>
</h5>
<pre><code> empty_vars         checks for emtpy variables.
 nan_identify()     Checks whether NAs or NaNs are present in any variable.
 nan_filter()       Returns modified data set where NaNs have been removed or replaced.
 na_filter()        Returns modified data set where NAs have been removed or replaced.
 unique_filter()    Check for and remove duplicate rows.</code></pre>
</div>
<div class="section level5">
<h5 id="filtering-rows-of-the-dataset">Filtering rows of the dataset<a class="anchor" aria-label="anchor" href="#filtering-rows-of-the-dataset"></a>
</h5>
<pre><code> filter_table()     Stores filter functions in a table.     
 filter_dat()       Apply stored and new filter functions to data.</code></pre>
</div>
<div class="section level5">
<h5 id="converting-class-or-lonlat-units">Converting class or lon/lat units<a class="anchor" aria-label="anchor" href="#converting-class-or-lonlat-units"></a>
</h5>
<pre><code> change_class()       Convert variable class.
 degree()            Convert lon/lat to decimal format.</code></pre>
</div>
<div class="section level5">
<h5 id="wrappers-for-multiple-checking-functions">Wrappers for multiple “checking” functions<a class="anchor" aria-label="anchor" href="#wrappers-for-multiple-checking-functions"></a>
</h5>
<pre><code> data_check()        Wrapper for data quality check functions, including data_verification().
 data_verification() Checks for unique column names, each row is a unique choice occurrence, etc.
 check_model_data()  Checks for presence of NAs, NaNs and Inf in model data. Function must be run before models can be developed.</code></pre>
</div>
</div>
<div class="section level4">
<h4 id="function-details-3">Function details<a class="anchor" aria-label="anchor" href="#function-details-3"></a>
</h4>
<div class="section level5">
<h5 id="visualizing-the-data-1">Visualizing the data<a class="anchor" aria-label="anchor" href="#visualizing-the-data-1"></a>
</h5>
<p><code>summary_stats(dat, project, x = NULL)</code> prints summary
statistics for each variable in the <code>dat</code>. If <code>x</code>
is specified, summary stats will be returned only for that variable.</p>
<pre><code><span> <span class="fu"><a href="../../reference/spatial_hist.html">spatial_hist</a></span><span class="op">(</span><span class="op">)</span>    </span>
<span> <span class="fu"><a href="../../reference/spatial_summary.html">spatial_summary</a></span><span class="op">(</span><span class="op">)</span>  </span>
<span> <span class="fu"><a href="../../reference/map_plot.html">map_plot</a></span><span class="op">(</span><span class="op">)</span>         </span></code></pre>
</div>
<div class="section level5">
<h5 id="subsetting-the-data-1">Subsetting the data<a class="anchor" aria-label="anchor" href="#subsetting-the-data-1"></a>
</h5>
<pre><code><span> <span class="fu"><a href="../../reference/select_vars.html">select_vars</a></span><span class="op">(</span><span class="op">)</span>       </span>
<span> <span class="fu"><a href="../../reference/add_vars.html">add_vars</a></span><span class="op">(</span><span class="op">)</span>         </span></code></pre>
</div>
<div class="section level5">
<h5 id="checking-for-outliers-1">Checking for outliers<a class="anchor" aria-label="anchor" href="#checking-for-outliers-1"></a>
</h5>
<pre><code><span> <span class="va">outlier_boxplot</span></span>
<span> <span class="fu"><a href="../../reference/outlier_table.html">outlier_table</a></span><span class="op">(</span><span class="op">)</span>    </span>
<span> <span class="fu"><a href="../../reference/outlier_plot.html">outlier_plot</a></span><span class="op">(</span><span class="op">)</span>     </span>
<span> <span class="fu"><a href="../../reference/outlier_remove.html">outlier_remove</a></span><span class="op">(</span><span class="op">)</span>   </span></code></pre>
</div>
<div class="section level5">
<h5 id="checking-for-empty-variables-unique-rows-nas-and-nans-1">Checking for empty variables, unique rows, NAs, and NaNs<a class="anchor" aria-label="anchor" href="#checking-for-empty-variables-unique-rows-nas-and-nans-1"></a>
</h5>
<p><code>empty_vars_filter(dat, project, remove = FALSE)</code> checks
for empty variables and prints an outcome message to the console. If
empty variables are present and <code>remove = TRUE</code>, then empty
variables will be removed from <code>dat</code>.</p>
<pre><code><span> <span class="fu"><a href="../../reference/nan_identify.html">nan_identify</a></span><span class="op">(</span><span class="op">)</span>     </span>
<span> <span class="fu"><a href="../../reference/nan_filter.html">nan_filter</a></span><span class="op">(</span><span class="op">)</span>  </span>
<span> </span></code></pre>
<p><code>na_filter(dat, project, x=NULL, replace = F, remove = F, rep.value = NA, over_write = FALSE)</code>
checks for NAs and removes or replaces NAs. To check for NAs across
<code>dat</code>, run the function specifying only <code>dat</code>
[<code>na_filter(pollockMainDataTable)</code>]. The function will return
a statement of which variables, if any, contain NAs. To remove NAs, use
<code>remove = TRUE</code>. All rows containing NAs in variable(s)
<code>x</code> will be removed from <code>dat</code>. To replace NAs,
use <code>replace = TRUE</code>. If <code>replace = TRUE</code> and
<code>rep.value</code> is not defined, then NAs are replaced with the
mean value of <code>x</code>. <code>rep.value</code> must be specified
if <code>x</code> is not numeric. The function returns the modified
dataset if either <code>replace</code> or <code>remove</code> are true.
Save the modified data table to the FishSET database by setting
<code>over_write = TRUE</code>.</p>
<p><code>unique_filter(dat, project, remove = FALSE)</code> returns a
statement of whether each row in <code>dat</code> is unique. Set
<code>remove=TRUE</code> to remove duplicate rows.</p>
</div>
<div class="section level5">
<h5 id="filtering-rows-of-the-dataset-1">Filtering rows of the dataset<a class="anchor" aria-label="anchor" href="#filtering-rows-of-the-dataset-1"></a>
</h5>
<pre><code><span> <span class="fu"><a href="../../reference/filter_table.html">filter_table</a></span><span class="op">(</span><span class="op">)</span>      </span>
<span> <span class="fu"><a href="../../reference/filter_dat.html">filter_dat</a></span><span class="op">(</span><span class="op">)</span>     </span></code></pre>
</div>
<div class="section level5">
<h5 id="converting-variable-class-or-lonlat-units">Converting variable class or lon/lat units<a class="anchor" aria-label="anchor" href="#converting-variable-class-or-lonlat-units"></a>
</h5>
<p><code>change_class(dat, project, x = NULL, newclass = NULL, savedat = FALSE)</code>
returns a table with data class for each variable in <code>dat</code>
and changes variable classes. To view variable classes run the function
with default settings, specifying only <code>dat</code> and
<code>project</code>. If variable class should be changed, run the
function again, specifying the variables (<code>x</code>) to be change
and the newclasses (<code>newclass</code>). Length of
<code>newclass</code> should match the length of <code>x</code> unless
all variables in <code>x</code> should be the same class. Options are
“numeric”, “factor”, “date”, and “character”. Use
<code>savedat = TRUE</code> to save modified data table.</p>
<pre><code><span> <span class="fu"><a href="../../reference/degree.html">degree</a></span><span class="op">(</span><span class="op">)</span>            </span></code></pre>
</div>
<div class="section level5">
<h5 id="wrappers-for-multiple-checking-functions-1">Wrappers for multiple “checking” functions<a class="anchor" aria-label="anchor" href="#wrappers-for-multiple-checking-functions-1"></a>
</h5>
<p><code><a href="../../reference/data_check.html">data_check()</a></code> is the primary function to check for data
quality issues in the dataset. The function calls
<code>summary_stats</code>, <code>nan_identify</code>,
<code>outlier_table</code> and <code>outlier_plot</code>, and
<code>data_verification</code>, which contains script to check for
unique column names and empty columns, that each row is a unique
observation at haul or trip level, and calls the <code>degree</code>
function. Use <code>outlier_remove</code>, <code>na_filter</code>,
<code>nan_filter</code>, and <code>degree</code> to correct any errors.
Empty columns and duplicate rows will be removed.</p>
<p><code>data_verification(dat, project)</code> checks that all column
names in the <code>dat</code> are unique, whether any columns in the
data frame are empty, whether each row is a unique choice occurrence at
the haul or trip level, and that either latitude and longitude or
fishing area are included.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#data_check(pollockMainDataTable, 'pollock', 'OFFICIAL_TOTAL_CATH_MT')</span></span></code></pre></div>
<p><code>check_model_data</code> checks for data quality issues that
will result in errors when running models, including NAs, NaNs and INF
values in the dataset and that each row is a unique occurrence at the
haul or trip level. Run this function before creating the model design
file (<code>make_model_design</code>). Even if the data passed the
<code>data_check</code> tests, errors may be produced by data
modification and data creation functions.</p>
<p>Use <code>filter_table</code> and <code>filter_dat</code> to subset
the data, retaining rows that meet the condition. Define and save, for
records and future use, conditions in <code>filter_table</code>. Apply
filters with <code>filter_dat</code>.</p>
<table class="table">
<thead><tr class="header">
<th>Data table</th>
<th>Vector</th>
<th>FilterFunction</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>MainDataTable</td>
<td>“PORT_CODE”</td>
<td>PORT_CODE == 1</td>
</tr>
<tr class="even">
<td>MainDataTable</td>
<td>“TRIP_START”</td>
<td>TRIP_START &gt;= 2011-02-01</td>
</tr>
<tr class="odd">
<td>PortDataTable</td>
<td>“LATITUDE”</td>
<td>LATITUDE &lt; 57</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Alan Haynie - NOAA Federal.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
