<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Subroutine to run chosen discrete choice model. Function pulls necessary data 
generated in make_model_design and loops through model design 
choices and expected catch cases. Output is saved to the FishSET database."><title>Run discrete choice model — discretefish_subroutine • FishSET</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Run discrete choice model — discretefish_subroutine"><meta property="og:description" content="Subroutine to run chosen discrete choice model. Function pulls necessary data 
generated in make_model_design and loops through model design 
choices and expected catch cases. Output is saved to the FishSET database."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">FishSET</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.8</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/FishSET_FunctionList.html">FishSET R package functions</a>
    <a class="dropdown-item" href="../articles/FishSET_GUI_Quickstart_Guide.html">FishSET GUI Quickstart Guide</a>
    <a class="dropdown-item" href="../articles/RconsoleVignette/02-Data.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../articles/RconsoleVignette/03-DataExploration.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../articles/RconsoleVignette/04-Spatial.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../articles/RconsoleVignette/05-DataCreation.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../articles/RconsoleVignette/06-Modeling.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../articles/RconsoleVignette/07-Policy_Welfare.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../articles/RconsoleVignette/08_reporting.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../articles/RconsoleVignette/index.html">Using FishSET in the RConsole</a>
    <a class="dropdown-item" href="../articles/scallop-example.html">scallop-example</a>
    <a class="dropdown-item" href="../articles/scallop-mod-example.html">Scallop Conditional Logit Model Example</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Run discrete choice model</h1>
      
      <div class="d-none name"><code>discretefish_subroutine.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Subroutine to run chosen discrete choice model. Function pulls necessary data 
generated in <code><a href="make_model_design.html">make_model_design</a></code> and loops through model design 
choices and expected catch cases. Output is saved to the FishSET database.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">discretefish_subroutine</span><span class="op">(</span></span>
<span>  <span class="va">project</span>,</span>
<span>  run <span class="op">=</span> <span class="st">"new"</span>,</span>
<span>  select.model <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  explorestarts <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  breakearly <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  space <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  dev <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  use.scalers <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  scaler.func <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  CV <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>project</dt>
<dd><p>String, name of project.</p></dd>


<dt>run</dt>
<dd><p>String, how models should be run. <code>'new'</code> will only run models
that exist in the model design file but not in the model output table. <code>'all'</code>
will run all models in the model design file, replacing existing model output. 
The third option is to enter a vector of model names to run (use 
<code><a href="model_names.html">model_names()</a></code> to see current model names). 
If the specified model already has output it will be replaced.</p></dd>


<dt>select.model</dt>
<dd><p>Return an interactive data table that allows users to 
select and save table of best models based on measures of fit.</p></dd>


<dt>explorestarts</dt>
<dd><p>Logical, should starting parameters value space be explored? 
Set to <code>TRUE</code> if unsure of the number of starting parameter values to 
include or of reasonable starting parameters values. Better starting parameter 
values can help with model convergence.</p></dd>


<dt>breakearly</dt>
<dd><p>Logical, if <code>explorestarts = TRUE</code>, should the first set 
of starting parameter values that returns a valid (numeric) loglikelihood 
value be returned (<code>TRUE</code>) or should the entire parameter space be considered 
and the set of starting parameter values that return the lowest loglikelihood 
value be returned (<code>FALSE</code>).</p></dd>


<dt>space</dt>
<dd><p>Specify if <code>explorestarts = TRUE</code>. List of length 1 or length 
equal to the number of models to be evaluated. <code>space</code> is the number of 
starting value permutations to test (the size of the space to explore). The 
greater the <code>dev</code> argument, the larger the <code>space</code> argument should be.</p></dd>


<dt>dev</dt>
<dd><p>Specify if <code>explorestarts = TRUE</code>. List of length 1 or length 
equal to the number of models to be evaluated. <code>dev</code> refers to how far 
to deviate from the average parameter values when exploring (random normal 
deviates). The less certain the average parameters are, the greater the 
<code>dev</code> argument should be.</p></dd>


<dt>use.scalers</dt>
<dd><p>Logical, should data be normalized? Defaults to <code>FALSE</code>. 
Rescaling factors are the mean of the numeric vector unless specified with 
<code>scaler.func</code>.</p></dd>


<dt>scaler.func</dt>
<dd><p>Function to calculate rescaling factors. Can be a generic 
function, such as mean, or a user-defined function. User-defined functions 
must be specified as <code>scaler.fun = function(x, FUN = sd) 2*FUN(x)</code>. 
This example returns two times the standard deviation of <code>x</code>.</p></dd>


<dt>CV</dt>
<dd><p>Logical, <code>CV = TRUE</code> when running <code>discretefish_subroutine</code> for k-fold cross validation,
and the default value is <code>CV = FALSE</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<table class="table table"><tr><td>OutLogit:</td><td>[outmat1 se1 EPM2] (coefs, ses, tstats)</td><td>optoutput:</td><td>optimization information</td></tr><tr><td>seoumat2:</td><td>ses</td><td>MCM:</td><td>Model Comparison metrics</td></tr></table></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Runs through model design choices generated by <code><a href="make_model_design.html">make_model_design</a></code> 
  and stored as `ModelInputData` in FishSET database.  Data matrix is created 
  in <code><a href="create_model_input.html">create_model_input</a></code>. Required data, optional data, and details 
  on likelihood functions are outlined in <code><a href="make_model_design.html">make_model_design</a></code>. <br><br></p>
<p>Likelihood-specific initial parameter estimates: <br></p>
<ol><li><p><strong>Conditional logit likelihood (<code><a href="logit_c.html">logit_c</a></code>)</strong><br>
   Starting parameter values takes the order of: c([alternative-specific parameters],  [travel-distance parameters]).
   The alternative-specific parameters and travel-distance parameters are of length (# of alternative-specific variables) and (# of
   travel-distance variables) respectively.</p></li>
<li><p><strong>Zonal logit with area specific constants (<code><a href="logit_zonal.html">logit_zonal</a></code>)</strong> <br>
   Starting parameters takes the order of: c([average-catch parameters], [travel-distance parameters]).
   The average-catch and travel-distance parameters are of length (# of average-catch variables)*(k-1) and (# of travel-distance variables)
   respectively, where (k) equals the number of alternative fishing choices.</p></li>
<li><p><strong>Full information model with Dahl's correction function (<code><a href="logit_correction.html">logit_correction</a></code>)</strong> <br>
   Starting parameter values takes the order of: c([marginal utility from catch], [catch-function parameters],
   [polynomial starting parameters], [travel-distance parameters], [catch sigma]).
   The number of polynomial interaction terms is currently set to 2, so given the chosen degree 'polyn' there should be
   <code>"(((polyn+1)*2)+2)*(k)"</code> polynomial starting parameters, where (k) equals the number of alternative fishing choices.
   The marginal utility from catch and catch sigma are of length equal to unity respectively. The catch-function and
   travel-distance parameters are of length (# of catch variables)*(k) and (# of cost variables) respectively.</p></li>
<li><p><strong>Expected profit model with normal catch function (<code><a href="epm_normal.html">epm_normal</a></code>)</strong> <br>
   Starting parameters values take the order of: c([catch-function parameters], [travel-distance parameters], [catch sigma(s)], [scale parameter]).
   The catch-function and travel-distance parameters are of length (# of catch-function variables)*(k) and (# of travel-distance
   variables) respectively, where (k) equals the number of alternative fishing choices. The catch sigma(s) are either of length equal
   to unity or length (k) if the analyst is estimating location-specific catch sigma parameters. The scale parameter is of length
   equal to unity.</p></li>
<li><p><strong>Expected profit model with Weibull catch function (<code><a href="epm_weibull.html">epm_weibull</a></code>)</strong> <br>
   Starting parameter values takes the order of: c([catch-function parameters], [travel-distance parameters], [catch sigma(s)], [scale parameter]).
   The catch-function and travel-distance parameters are of length (# of catch-function variables)*(k) and (# of travel-distance variables)
   respectively, where (k) equals the number of alternative fishing choices. The catch sigma(s) are either of length equal to unity or
   length (k) if the analyst is estimating location-specific catch sigma parameters. The scale parameter is of length equal to unity.</p></li>
<li><p><strong>Expected profit model with log-normal catch function (<code><a href="epm_lognormal.html">epm_lognormal</a></code>)</strong> <br>
   Starting parameter values takes the order of: c([catch-function parameters], [travel-distanceparameters],
   [catch sigma(s)], [scale parameter]).
   The catch-function and travel-distance parameters are of length (# of
   catch-function variables)*(k) and (# of travel-distance variables) respectively, where (k) equals the number of alternative fishing choices.
   The catch sigma(s) are either of length equal to unity or length (k) if the analyst is estimating location-specific catch sigma parameters.
   The scale parameter is of length equal to unity.</p></li>
</ol><p><br></p>   
<p>Model output are saved to the FishSET database and can be loaded to the console with:</p><table class="table table"><tr><td><code><a href="model_out_view.html">model_out_view</a></code>:</td><td>model output including optimization information, standard errors, coefficients, and t- statistics.</td><td><code><a href="model_params.html">model_params</a></code>:</td><td>model estimates and standard error</td></tr><tr><td><code><a href="model_fit.html">model_fit</a></code>:</td><td>model comparison metrics</td><td><code><a href="globalcheck_view.html">globalcheck_view</a></code>:</td><td>model error message</td></tr></table><p>For obtaining catch, choice, distance, and otherdat data generated from <code>make_model_design</code> function.
   <code>ModelInputData</code> table will be pulled from FishSET database.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">results</span> <span class="op">&lt;-</span> <span class="fu">discretefish_subroutine</span><span class="op">(</span><span class="st">"pcod"</span>, run <span class="op">=</span> <span class="st">'all'</span>, select.model <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Alan Haynie - NOAA Federal.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

