<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="vessel_count counts the number of active vessels in the main table. It
can summarize by period if date is provided, group by any number of 
grouping variables, and filter by period or value. There are several options 
for customizing table/plot output."><title>Summarize active vessels — vessel_count • FishSET</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Summarize active vessels — vessel_count"><meta property="og:description" content="vessel_count counts the number of active vessels in the main table. It
can summarize by period if date is provided, group by any number of 
grouping variables, and filter by period or value. There are several options 
for customizing table/plot output."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">FishSET</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.8</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/FishSET_FunctionList.html">FishSET R package functions</a>
    <a class="dropdown-item" href="../articles/FishSET_GUI_Quickstart_Guide.html">FishSET GUI Quickstart Guide</a>
    <a class="dropdown-item" href="../articles/scallop-example.html">Scallop Example</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Summarize active vessels</h1>
      
      <div class="d-none name"><code>vessel_count.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>vessel_count</code> counts the number of active vessels in the main table. It
can summarize by period if <code>date</code> is provided, group by any number of 
grouping variables, and filter by period or value. There are several options 
for customizing table/plot output.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">vessel_count</span><span class="op">(</span></span>
<span>  <span class="va">dat</span>,</span>
<span>  <span class="va">project</span>,</span>
<span>  <span class="va">v_id</span>,</span>
<span>  date <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  period <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  group <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sub_date <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  filter_date <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  date_value <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  filter_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  filter_value <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  filter_expr <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  facet_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  combine <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  position <span class="op">=</span> <span class="st">"stack"</span>,</span>
<span>  tran <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>  format_lab <span class="op">=</span> <span class="st">"decimal"</span>,</span>
<span>  value <span class="op">=</span> <span class="st">"count"</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"bar"</span>,</span>
<span>  scale <span class="op">=</span> <span class="st">"fixed"</span>,</span>
<span>  output <span class="op">=</span> <span class="st">"tab_plot"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>dat</dt>
<dd><p>Primary data containing information on hauls or trips. 
Table in FishSET database contains the string 'MainDataTable'.</p></dd>


<dt>project</dt>
<dd><p>String, name of project.</p></dd>


<dt>v_id</dt>
<dd><p>Variable in <code>dat</code> containing vessel identifier to count.</p></dd>


<dt>date</dt>
<dd><p>Date variable to aggregate by.</p></dd>


<dt>period</dt>
<dd><p>Time period to aggregate by. Options include <code>"year"</code>, 
<code>"month"</code>, <code>"week"</code> (weeks in the year), <code>"weekday"</code>, 
<code>"weekday_abv"</code>, <code>"day_of_month"</code>, <code>"day_of_year"</code>, and 
<code>"cal_date"</code> (calender date).</p></dd>


<dt>group</dt>
<dd><p>Names of grouping variables. For line plots (<code>type = "line"</code>)
two grouping variables can be entered, the first is passed to "color" and second 
to "linetype". Only one grouping variable can be used for barplots 
(<code>type = "bar"</code>), which is passed to "fill". When <code>combine = TRUE</code> 
all variables in <code>group</code> will be joined. Grouping by <code>"year"</code>, 
<code>"month"</code>, and <code>"week"</code> are available if a date variable is added 
to <code>sub_date</code>.</p></dd>


<dt>sub_date</dt>
<dd><p>Date variable used for subsetting, grouping, or splitting by date.</p></dd>


<dt>filter_date</dt>
<dd><p>The type of filter to apply to `MainDataTable`. To filter 
by a range of dates, use <code>filter_date = "date_range"</code>. To filter by a 
given period, use "year-day", "year-week", "year-month", "year", "month", 
"week", or "day". The argument <code>date_value</code> must be provided.</p></dd>


<dt>date_value</dt>
<dd><p>This argument is paired with <code>filter_date</code>. To filter
by date range, set <code>filter_date = "date_range"</code> and enter a  start- and 
end-date into <code>date_value</code> as a string: 
<code>date_value = c("2011-01-01", "2011-03-15")</code>.</p>
<p>To filter by period (e.g. "year", "year-month"), use integers (4 digits if year, 1-2 
digits if referencing a day, month, or week). Use a vector if filtering by 
a single period: <code>date_filter = "month"</code> and <code>date_value = c(1, 3, 5)</code>. 
This would filter the data to January, March, and May.</p>
<p>Use a list if using a year-period type filter, e.g. "year-week", with the 
format: <code>list(year, period)</code>. For example, <code>filter_date = "year-month"</code>
and <code>date_value = list(2011:2013, 5:7)</code> will filter the data table from 
May through July for years 2011-2013.</p></dd>


<dt>filter_by</dt>
<dd><p>String, variable name to filter `MainDataTable` by. the argument 
<code>filter_value</code> must be provided.</p></dd>


<dt>filter_value</dt>
<dd><p>A vector of values to filter `MainDataTable` by using the 
variable in <code>filter_by</code>. For example, if <code>filter_by = "GEAR_TYPE"</code>, 
<code>filter_value = 1</code> will include only observations with a gear type of 1.</p></dd>


<dt>filter_expr</dt>
<dd><p>String, a valid R expression to filter `MainDataTable` by 
using the variable in <code>filter_by</code>.</p></dd>


<dt>facet_by</dt>
<dd><p>Variable name to facet by. Accepts up to two variables. These 
can be variables that exist in <code>dat</code>, or a variable created by 
<code>vessel_count()</code> such as <code>"year"</code>, <code>"month"</code>, or <code>"week"</code> 
if a date variable is added to <code>sub_date</code>. The first variable is facetted 
by row and the second by column.</p></dd>


<dt>combine</dt>
<dd><p>Whether to combine variables listed in <code>group</code>. This is passed
to the "fill" or "color" aesthetic for plots.</p></dd>


<dt>position</dt>
<dd><p>Positioning of bar plot. Options include 'stack', 'dodge', 
and 'fill'.</p></dd>


<dt>tran</dt>
<dd><p>A function to transform the y-axis. Options include log, log2, log10, 
and sqrt.</p></dd>


<dt>format_lab</dt>
<dd><p>decimal or scientific</p></dd>


<dt>value</dt>
<dd><p>Whether to return <code>"count"</code> or <code>"percent"</code> of active 
vessels. Defaults to <code>"count"</code>.</p></dd>


<dt>type</dt>
<dd><p>Plot type, options include <code>"bar"</code> (the default) and <code>"line"</code>.</p></dd>


<dt>scale</dt>
<dd><p>Scale argument passed to <code>facet_grid</code>. 
Options include <code>"free"</code>, <code>"free_x"</code>, <code>"free_y"</code>. Defaults to 
<code>"fixed"</code>.</p></dd>


<dt>output</dt>
<dd><p>Whether to display <code>"plot"</code>, <code>"table"</code>. Defaults 
to both (<code>"tab_plot"</code>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>When <code>output = "tab_plot"</code> a list containing a table and plot are  
returned. If <code>output = "table"</code> only the summary table is returned, if 
<code>output = "plot"</code> only the plot.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>vessel_count</code> gives the number (or percent) of active vessels
  using a column of unique vessel IDs. The data can be filtered by date and/or 
  by a variable. (console users may want to use a separate filtering function, 
  like <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">dplyr::filter</a></code>, before running <code>vessel_count</code>: note that this 
  is okay but will lead to different output if using <code><a href="log_rerun.html">log_rerun</a></code>).
  <code>filter_date</code> specifies the type of date filter to apply--by date-range or by
  period. <code>date_value</code> should contain the values to filter the data by. To 
  filter by a variable, enter its name as a string in <code>filter_by</code> and
  include the values to filter by in <code>filter_value</code>.</p>  
<p>Up to two grouping variables can be entered. Grouping variables can be merged 
  into one variable using <code>combine = TRUE</code>; in this case any number of variables 
  can be joined, but no more than three is recommended.</p>  
<p>For faceting, any variable (including ones listed in <code>group</code>) can be used, 
  but "year", "month", "week" are also available provided a date variable is 
  added to <code>sub_date</code>. Currently, combined variables cannot be faceted.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># grouping by two variables</span></span></span>
<span class="r-in"><span><span class="fu">vessel_count</span><span class="op">(</span><span class="va">pollockMainDataTable</span>, v_id <span class="op">=</span> <span class="st">"VESSEL_ID"</span>, </span></span>
<span class="r-in"><span>             group <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"GEAR_TYPE"</span>, <span class="st">"IFQ"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span>             </span></span>
<span class="r-in"><span><span class="co"># filter by variable</span></span></span>
<span class="r-in"><span><span class="fu">vessel_count</span><span class="op">(</span><span class="va">pollockMainDataTable</span>, v_id <span class="op">=</span> <span class="st">"VESSEL_ID"</span>, group <span class="op">=</span> <span class="st">"GEAR_TYPE"</span>,</span></span>
<span class="r-in"><span>             filter_by <span class="op">=</span> <span class="st">"IFQ"</span>, filter_value <span class="op">=</span> <span class="st">"Y"</span><span class="op">)</span></span></span>
<span class="r-in"><span>             </span></span>
<span class="r-in"><span><span class="co"># filter by month</span></span></span>
<span class="r-in"><span><span class="fu">vessel_count</span><span class="op">(</span><span class="va">pollockMainDataTable</span>, v_id <span class="op">=</span> <span class="st">"VESSEL_ID"</span>, group <span class="op">=</span> <span class="st">"GEAR_TYPE"</span>,</span></span>
<span class="r-in"><span>             sub_date <span class="op">=</span> <span class="st">"HAUL_DATE"</span>, date_filter <span class="op">=</span> <span class="st">"month"</span>, date_value <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">5</span><span class="op">)</span></span></span>
<span class="r-in"><span>             </span></span>
<span class="r-in"><span><span class="co">#' # filter by date</span></span></span>
<span class="r-in"><span><span class="fu">vessel_count</span><span class="op">(</span><span class="va">pollockMainDataTable</span>, v_id <span class="op">=</span> <span class="st">"VESSEL_ID"</span>, group <span class="op">=</span> <span class="st">"GEAR_TYPE"</span>,</span></span>
<span class="r-in"><span>             sub_date <span class="op">=</span> <span class="st">"HAUL_DATE"</span>, date_filter <span class="op">=</span> <span class="st">"date_range"</span>, </span></span>
<span class="r-in"><span>             date_value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"2011-01-01"</span>, <span class="st">"2011-02-05"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># summarize by month</span></span></span>
<span class="r-in"><span><span class="fu">vessel_count</span><span class="op">(</span><span class="va">pollockMainDataTable</span>, v_id <span class="op">=</span> <span class="st">'VESSEL_ID'</span>, date <span class="op">=</span> <span class="st">'DATE_FISHING_BEGAN'</span>, </span></span>
<span class="r-in"><span>             period <span class="op">=</span> <span class="st">'month'</span>, group <span class="op">=</span> <span class="st">'DISEMBARKED_PORT'</span>, position <span class="op">=</span> <span class="st">'dodge'</span>, </span></span>
<span class="r-in"><span>             output <span class="op">=</span> <span class="st">'plot'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lisa Pfeiffer, Paul G Carvalho, Anna Abelman, Min-Yang Lee, Melanie Harsch, Bryce McManus, Alan Haynie.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

