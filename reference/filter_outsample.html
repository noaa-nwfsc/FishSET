<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Filter the out-of-sample dataset and prepare for predictions of fishing probability."><title>Filter out-of-sample data for model predictions — filter_outsample • FishSET</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Filter out-of-sample data for model predictions — filter_outsample"><meta property="og:description" content="Filter the out-of-sample dataset and prepare for predictions of fishing probability."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">FishSET</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.8</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/FishSET_FunctionList.html">FishSET R package functions</a>
    <a class="dropdown-item" href="../articles/FishSET_GUI_Quickstart_Guide.html">FishSET GUI Quickstart Guide</a>
    <a class="dropdown-item" href="../articles/RconsoleVignette/02-Data.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../articles/RconsoleVignette/03-DataExploration.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../articles/RconsoleVignette/04-Spatial.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../articles/RconsoleVignette/05-DataCreation.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../articles/RconsoleVignette/06-Modeling.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../articles/RconsoleVignette/07-Policy_Welfare.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../articles/RconsoleVignette/08_reporting.html">UNKNOWN TITLE</a>
    <a class="dropdown-item" href="../articles/RconsoleVignette/index.html">Using FishSET in the RConsole</a>
    <a class="dropdown-item" href="../articles/scallop-example.html">Scallop Example</a>
    <a class="dropdown-item" href="../articles/scallop-mod-example.html">Scallop Conditional Logit Model Example</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Filter out-of-sample data for model predictions</h1>
      
      <div class="d-none name"><code>filter_outsample.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Filter the out-of-sample dataset and prepare for predictions of fishing probability.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">filter_outsample</span><span class="op">(</span></span>
<span>  <span class="va">dat</span>,</span>
<span>  <span class="va">project</span>,</span>
<span>  <span class="va">mod.name</span>,</span>
<span>  spatial_outsample <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  zone.dat <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  spat <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  zone.spat <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  outsample_zones <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lon.spat <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  lat.spat <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  use.scalers <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  scaler.func <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>dat</dt>
<dd><p>Out-of-sample data</p></dd>


<dt>project</dt>
<dd><p>Name of project</p></dd>


<dt>mod.name</dt>
<dd><p>Name of saved model to use. Argument can be the name of the model or can pull the name 
of the saved "best" model. Leave <code>mod.name</code> empty to use the saved "best" model. If more than
one model is saved, <code>mod.name</code> should be the numeric indicator of which model to use.
Use <code>table_view("modelChosen", project)</code> to view a table of saved models.</p></dd>


<dt>spatial_outsample</dt>
<dd><p>Logical, indicate whether the data are out-of-sample spatially or not. 
Note that models with zone-specific coefficients (e.g., zonal logit) cannot be used to predict data that are 
out-of-sample spatially. <code>spatial_outsample = FALSE</code> can represent data out-of-sample temporally or out-of-sample 
based on another variable (e.g., vessel tonnage, gear type, etc.)</p></dd>


<dt>zone.dat</dt>
<dd><p>Variable in <code>dat</code>that identifies the individual areas or zones.</p></dd>


<dt>spat</dt>
<dd><p>Required, data file or character. 
<code>spat</code> is a spatial data file containing information on fishery 
management or regulatory zones boundaries. Shape, json, geojson, and csv 
formats are supported. geojson is the preferred format. json files must be 
converted into geoson. This is done automatically when the file is loaded 
with <code><a href="read_dat.html">read_dat</a></code> with <code>is.map</code> set to true. <code>spat</code> 
cannot, at this time, be loaded from the FishSET database. <br></p></dd>


<dt>zone.spat</dt>
<dd><p>Variable in <code>spat</code> that identifies the individual areas or zones.</p></dd>


<dt>outsample_zones</dt>
<dd><p>Vector of out-of-sample zones to filter <code>dat</code>. Only provided as input when running this function
in the main app.</p></dd>


<dt>lon.spat</dt>
<dd><p>Required for csv files. Variable or list from <code>spat</code> 
containing longitude data. Leave as NULL if <code>spat</code> is a shape or json file.</p></dd>


<dt>lat.spat</dt>
<dd><p>Required for csv files. Variable or list from <code>spat</code> 
containing latitude data.  Leave as NULL if <code>spat</code> is a shape or json file.</p></dd>


<dt>use.scalers</dt>
<dd><p>Input for <code><a href="create_model_input.html">create_model_input()</a></code>. Logical, should data be normalized? Defaults to <code>FALSE</code>. Rescaling factors are the mean of the 
numeric vector unless specified with <code>scaler.func</code>.</p></dd>


<dt>scaler.func</dt>
<dd><p>Input for <code><a href="create_model_input.html">create_model_input()</a></code>. Function to calculate rescaling factors.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Returns probability of logit model by choice</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This function filters the out-of-sample data. If the data is out-of-sample spatially, then set <code>spatial_outsample = TRUE</code> and 
provide a spatial file (<code>spat</code>) and the zone id in the spatial file <code>zone.spat</code>. An interactive map is used for selecting out
of sample zones. If the data are not spatially out-of-sample, then just filter the data for the zones included in the selected model. Note that 
models with zone-specific coefficients (e.g., zonal logit) cannot predict spatial out-of-sample data. Upon successful execution of 
<code>filter_outsample()</code> the filtered dataset will be saved to an RDS file in the outputs folder. This function will overwrite the existing
RDS file each time it is run.</p>
    </div>

  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Alan Haynie - NOAA Federal.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

