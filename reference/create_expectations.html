<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Create expected catch or expected revenue matrix. The matrix is required for 
the logit_c model. Multiple user-defined matrices can be saved
by setting replace.output = FALSE and re-running the function."><title>Create expected catch/expected revenue matrix — create_expectations • FishSET</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Create expected catch/expected revenue matrix — create_expectations"><meta property="og:description" content="Create expected catch or expected revenue matrix. The matrix is required for 
the logit_c model. Multiple user-defined matrices can be saved
by setting replace.output = FALSE and re-running the function."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">FishSET</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.8</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/FishSET_FunctionList.html">FishSET R package functions</a>
    <a class="dropdown-item" href="../articles/FishSET_GUI_Quickstart_Guide.html">FishSET GUI Quickstart Guide</a>
    <a class="dropdown-item" href="../articles/scallop-example.html">Scallop Example</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Create expected catch/expected revenue matrix</h1>
      
      <div class="d-none name"><code>create_expectations.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create expected catch or expected revenue matrix. The matrix is required for 
the <code><a href="logit_c.html">logit_c</a></code> model. Multiple user-defined matrices can be saved
by setting <code>replace.output = FALSE</code> and re-running the function.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">create_expectations</span><span class="op">(</span></span>
<span>  <span class="va">dat</span>,</span>
<span>  <span class="va">project</span>,</span>
<span>  <span class="va">catch</span>,</span>
<span>  price <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  defineGroup <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  temp.var <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  temporal <span class="op">=</span> <span class="st">"daily"</span>,</span>
<span>  calc.method <span class="op">=</span> <span class="st">"standardAverage"</span>,</span>
<span>  lag.method <span class="op">=</span> <span class="st">"simple"</span>,</span>
<span>  empty.catch <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  empty.expectation <span class="op">=</span> <span class="fl">1e-04</span>,</span>
<span>  temp.window <span class="op">=</span> <span class="fl">7</span>,</span>
<span>  temp.lag <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  year.lag <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  dummy.exp <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  default.exp <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  replace.output <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  weight_avg <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  outsample <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>dat</dt>
<dd><p>Primary data containing information on hauls or trips. Table in FishSET 
database contains the string 'MainDataTable'.</p></dd>


<dt>project</dt>
<dd><p>String, name of project.</p></dd>


<dt>catch</dt>
<dd><p>Variable from <code>dat</code> containing catch data.</p></dd>


<dt>price</dt>
<dd><p>Optional, variable from <code>dat</code> containing price/value data.
Price is multiplied against <code>catch</code> to generated revenue. If revenue exists 
in <code>dat</code> and you wish to use this revenue instead of price, then <code>catch</code> 
must be a vector of 1 of length equal to <code>dat</code>. Defaults to <code>NULL</code>.</p></dd>


<dt>defineGroup</dt>
<dd><p>Optional, variable from <code>dat</code> that defines how to split 
the fleet. Defaults to treating entire dataframe <code>dat</code> as a fleet.</p></dd>


<dt>temp.var</dt>
<dd><p>Optional, temporal variable from <code>dat</code>. Set to <code>NULL</code> 
if temporal patterns in catch should not be considered.</p></dd>


<dt>temporal</dt>
<dd><p>String, choices are <code>"daily"</code> or <code>"sequential"</code>. Should 
time, if <code>temp.var</code> is defined, be included as a daily timeline or sequential 
order of recorded dates. For daily, catch on dates with no record are filled 
with <code>NA</code>. The choice affects how the rolling average is calculated. If 
temporal is daily then the window size for average and the temporal lag are 
in days. If sequential, then averaging will occur over the specified number 
of observations, regardless of how many days they represent.</p></dd>


<dt>calc.method</dt>
<dd><p>String, how catch values are average over window size. Select 
standard average (<code>"standardAverage"</code>), simple lag regression of means 
(<code>"simpleLag"</code>), or weights of regressed groups (<code>"weights"</code>)</p></dd>


<dt>lag.method</dt>
<dd><p>String, use regression over entire group (<code>"simple"</code>) 
or for grouped time periods (<code>"grouped"</code>).</p></dd>


<dt>empty.catch</dt>
<dd><p>String, replace empty catch with <code>NA</code>, <code>0</code>, mean 
of all catch (<code>"allCatch"</code>), or mean of grouped catch (<code>"groupCatch"</code>).</p></dd>


<dt>empty.expectation</dt>
<dd><p>Numeric, how to treat empty expectation values. Choices 
are to not replace (<code>NULL</code>) or replace with 0.0001 or 0.</p></dd>


<dt>temp.window</dt>
<dd><p>Numeric, temporal window size. If <code>temp.var</code> is not <code>NULL</code>, 
set the window size to average catch over. Defaults to 14 (14 days if <code>temporal</code> 
is <code>"daily"</code>).</p></dd>


<dt>temp.lag</dt>
<dd><p>Numeric, temporal lag time. If <code>temp.var</code> is not <code>NULL</code>, 
how far back to lag <code>temp.window</code>.</p></dd>


<dt>year.lag</dt>
<dd><p>If expected catch should be based on catch from previous year(s), 
set <code>year.lag</code> to the number of years to go back.</p></dd>


<dt>dummy.exp</dt>
<dd><p>Logical, should a dummy variable be created? If <code>TRUE</code>, 
output dummy variable for originally missing value. If <code>FALSE</code>, no dummy 
variable is outputted. Defaults to <code>FALSE</code>.</p></dd>


<dt>default.exp</dt>
<dd><p>Whether to run default expectations. Defaults to <code>FALSE</code>.
Alternatively, a character string containing the names of default expectations 
to run can be entered. Options include "recent", "older", "oldest", and 
"logbook". The logbook expectation is only run if <code>defineGroup</code> is used. 
"recent" will not include <code>defineGroup</code>. Setting <code>default.exp = TRUE</code>
will include all four options. See Details for how default expectations are 
defined.</p></dd>


<dt>replace.output</dt>
<dd><p>Logical, replace existing saved expected catch data frame 
with new expected catch data frame? If <code>FALSE</code>, new expected catch data 
frames appended to previously saved expected catch data frames. Default is 
<code>TRUE</code>. If <code>TRUE</code></p></dd>


<dt>weight_avg</dt>
<dd><p>Logical, if <code>TRUE</code> then all observations for a given zone on a 
given date will be included when calculating the mean, thus giving more 
weight to days with more observations in a given zone. If <code>FALSE</code>, then the 
daily mean for a zone will be calculated prior to calculating the mean across the
time window.</p></dd>


<dt>outsample</dt>
<dd><p>Logical, if <code>TRUE</code> then generate expected catch matrix for 
out-of-sample data. If <code>FALSE</code> generate for main data table. Defaults to
<code>outsample = FALSE</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>Function saves a list of expected catch matrices to the FishSET database
  as <code>projectExpectedCatch</code>. The list includes 
  the expected catch matrix from the user-defined choices, recent fine grained
  information, older fine grained information, oldest fine grained information,
  and logbook level information. Additional expected catch cases can be added 
  to the list by specifying <code>replace.output = FALSE</code>. The list is 
  automatically saved to the FishSET database and is called 
  in <code><a href="make_model_design.html">make_model_design</a></code>. The expected catch output does not need 
  to be loaded when defining or running the model.</p>


<p>newGridVar,  newDumV</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Function creates an expectation of catch or revenue for alternative 
  fishing zones (zones where they could have fished but did not). The output is 
  saved to the FishSET database and called by the <code><a href="make_model_design.html">make_model_design</a></code> 
  function. <code><a href="create_alternative_choice.html">create_alternative_choice</a></code> must be called first as observed 
  catch and zone inclusion requirements are defined there.<br> The primary choices 
  are whether to treat data as a fleet or to group the data (<code>defineGroup</code>) 
  and the time frame of catch data for calculating expected catch. Catch is averaged 
  along a daily or sequential timeline (<code>temporal</code>) using a rolling average. 
  <code>temp.window</code> and <code>temp.lag</code> determine the window size and temporal 
  lag of the window for averaging. Use <code><a href="temp_obs_table.html">temp_obs_table</a></code> before using 
  this function to assess the availability of data for the desired temporal moving 
  window size. Sparse data is not suited for shorter moving window sizes. For very 
  sparse data, consider setting <code>temp.var</code> to <code>NULL</code> and excluding 
  temporal patterns in catch. <br>
  Empty catch values are considered to be times of no fishing activity. Values 
  of 0 in the catch variable are considered times when fishing activity occurred 
  but with no catch. These points are included in the averaging and dummy creation 
  as points in time when fishing occurred. <br>
  Four default expected catch cases will be run:</p><ul><li><p>recent: Moving window size of two days. In this case, there is 
  no grouping, and catch for entire fleet is used.</p></li>
<li><p>older: Moving window size of seven days and lag of two days. In this 
  case, vessels are grouped (or not) based on <code>defineGroup</code> argument.</p></li>
<li><p>oldest: Moving window of seven days and lag of eight days. In this 
  case, vessels are grouped (or not) based on <code>defineGroup</code> argument.</p></li>
<li><p>logbook: Moving window size of 14 days and lag of one year, seven days. 
  Only used if fleet is defined in <code>defineGroup</code>.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">create_expectations</span><span class="op">(</span><span class="va">pollockMainDataTable</span>, <span class="st">"pollock"</span>, <span class="st">"OFFICIAL_TOTAL_CATCH_MT"</span>,</span></span>
<span class="r-in"><span>  price <span class="op">=</span> <span class="cn">NULL</span>, defineGroup <span class="op">=</span> <span class="st">"fleet"</span>, temp.var <span class="op">=</span> <span class="st">"DATE_FISHING_BEGAN"</span>,</span></span>
<span class="r-in"><span>  temporal <span class="op">=</span> <span class="st">"daily"</span>, calc.method <span class="op">=</span> <span class="st">"standardAverage"</span>, lag.method <span class="op">=</span> <span class="st">"simple"</span>,</span></span>
<span class="r-in"><span>  empty.catch <span class="op">=</span> <span class="st">"allCatch"</span>, empty.expectation <span class="op">=</span> <span class="fl">0.0001</span>, temp.window <span class="op">=</span> <span class="fl">4</span>,</span></span>
<span class="r-in"><span>  temp.lag <span class="op">=</span> <span class="fl">2</span>, year.lag <span class="op">=</span> <span class="fl">0</span>, dummy.exp <span class="op">=</span> <span class="cn">FALSE</span>, replace.output <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>  weight_avg <span class="op">=</span> <span class="cn">FALSE</span>, outsample <span class="op">=</span> <span class="cn">FALSE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lisa Pfeiffer, Paul G Carvalho, Anna Abelman, Min-Yang Lee, Melanie Harsch, Bryce McManus, Alan Haynie.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

