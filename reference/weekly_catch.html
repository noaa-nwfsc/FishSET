<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="weekly_catch summarizes catch (or other numeric variables) in the
main table by week. It can summarize by grouping variables and filter by period 
or value. There are several options for customizing the table and plot output."><title>Summarize weekly catch — weekly_catch • FishSET</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Summarize weekly catch — weekly_catch"><meta property="og:description" content="weekly_catch summarizes catch (or other numeric variables) in the
main table by week. It can summarize by grouping variables and filter by period 
or value. There are several options for customizing the table and plot output."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">FishSET</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/FishSET_FunctionList.html">FishSET R package functions</a>
    <a class="dropdown-item" href="../articles/FishSET_GUI_Quickstart_Guide.html">FishSET GUI Quickstart Guide</a>
    <a class="dropdown-item" href="../articles/likelihood-template.html">Create your own likelihood function</a>
    <a class="dropdown-item" href="../articles/making_a_spatial_grid.html">Making a spatial grid file</a>
    <a class="dropdown-item" href="../articles/scallop-example.html">Scallop Example</a>
    <a class="dropdown-item" href="../articles/scallop-mod-example.html">Scallop Conditional Logit Model Example</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/noaa-nwfsc/FishSET/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Summarize weekly catch</h1>
      <small class="dont-index">Source: <a href="https://github.com/noaa-nwfsc/FishSET/blob/HEAD/R/weekly_catch.R" class="external-link"><code>R/weekly_catch.R</code></a></small>
      <div class="d-none name"><code>weekly_catch.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>weekly_catch</code> summarizes catch (or other numeric variables) in the
main table by week. It can summarize by grouping variables and filter by period 
or value. There are several options for customizing the table and plot output.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">weekly_catch</span><span class="op">(</span></span>
<span>  <span class="va">dat</span>,</span>
<span>  <span class="va">project</span>,</span>
<span>  <span class="va">species</span>,</span>
<span>  <span class="va">date</span>,</span>
<span>  fun <span class="op">=</span> <span class="st">"sum"</span>,</span>
<span>  group <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  sub_date <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  filter_date <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  date_value <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  filter_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  filter_value <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  filter_expr <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  facet_by <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"bar"</span>,</span>
<span>  conv <span class="op">=</span> <span class="st">"none"</span>,</span>
<span>  tran <span class="op">=</span> <span class="st">"identity"</span>,</span>
<span>  format_lab <span class="op">=</span> <span class="st">"decimal"</span>,</span>
<span>  value <span class="op">=</span> <span class="st">"count"</span>,</span>
<span>  position <span class="op">=</span> <span class="st">"stack"</span>,</span>
<span>  combine <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  scale <span class="op">=</span> <span class="st">"fixed"</span>,</span>
<span>  output <span class="op">=</span> <span class="st">"tab_plot"</span>,</span>
<span>  format_tab <span class="op">=</span> <span class="st">"wide"</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>dat</dt>
<dd><p>Primary data containing information on hauls or trips. 
Table in FishSET database contains the string 'MainDataTable'.</p></dd>


<dt>project</dt>
<dd><p>String, name of project.</p></dd>


<dt>species</dt>
<dd><p>A variable in <code>dat</code> containing the species catch or a vector
of species variables.</p></dd>


<dt>date</dt>
<dd><p>Variable in <code>dat</code> containing dates to aggregate by.</p></dd>


<dt>fun</dt>
<dd><p>Name of function to aggregate by. Defaults to <code><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></code>.</p></dd>


<dt>group</dt>
<dd><p>Grouping variable names(s). Up to two grouping variables are available for
line plots and one for bar plots. For bar plots, if only one species is entered the first
group variable is passed to "fill". If multiple species are entered, species is passed to
"fill" and the grouping variable is dropped. An exception occurs when faceting by species,
then the grouping variable is passed to "fill". For line plots, the first grouping variable
is passed to "fill" and the second to "linetype" if a single species column is entered or if
faceting by species. Otherwise, species is passed to "fill", the first group variable to
"linetype", and second is dropped.</p></dd>


<dt>sub_date</dt>
<dd><p>Date variable used for subsetting, grouping, or splitting by date.</p></dd>


<dt>filter_date</dt>
<dd><p>The type of filter to apply to `MainDataTable`. To filter by a 
range of dates, use <code>filter_date = "date_range"</code>. To filter by a given period, use
"year-day", "year-week", "year-month", "year", "month", "week", or "day". 
The argument <code>date_value</code> must be provided.</p></dd>


<dt>date_value</dt>
<dd><p>This argument is paired with <code>filter_date</code>. To filter
by date range, set <code>filter_date = "date_range"</code> and enter a  start- and 
end-date into <code>date_value</code> as a string: 
<code>date_value = c("2011-01-01", "2011-03-15")</code>.</p>
<p>To filter by period (e.g. "year", "year-month"), use integers (4 digits if year, 1-2 
digits if referencing a day, month, or week). Use a vector if filtering by 
a single period: <code>date_filter = "month"</code> and <code>date_value = c(1, 3, 5)</code>. 
This would filter the data to January, March, and May.</p>
<p>Use a list if using a year-period type filter, e.g. "year-week", with the 
format: <code>list(year, period)</code>. For example, <code>filter_date = "year-month"</code>
and <code>date_value = list(2011:2013, 5:7)</code> will filter the data table from 
May through July for years 2011-2013.</p></dd>


<dt>filter_by</dt>
<dd><p>String, variable name to filter `MainDataTable` by. the argument 
<code>filter_value</code> must be provided.</p></dd>


<dt>filter_value</dt>
<dd><p>A vector of values to filter `MainDataTable` by using the variable 
in <code>filter_by</code>. For example, if <code>filter_by = "GEAR_TYPE"</code>, <code>filter_value = 1</code> 
will include only observations with a gear type of 1.</p></dd>


<dt>filter_expr</dt>
<dd><p>String, a valid R expression to filter `MainDataTable` by using the variable 
in <code>filter_by</code>.</p></dd>


<dt>facet_by</dt>
<dd><p>Variable name to facet by. Accepts up to two variables. These can be 
variables that exist in the dataset, or a variable created by <code><a href="species_catch.html">species_catch()</a></code> such 
as <code>"year"</code>, <code>"month"</code>, or <code>"week"</code> if a date variable is added 
to <code>sub_date</code>. Facetting by <code>"species"</code> is available if multiple catch columns 
are included in <code>"species"</code>. The first variable is facetted by row and the second by column.</p></dd>


<dt>type</dt>
<dd><p>Plot type, options include <code>"bar"</code> (the default) and <code>"line"</code>.</p></dd>


<dt>conv</dt>
<dd><p>Convert catch variable to <code>"tons"</code>, <code>"metric_tons"</code>, or 
by using a function entered as a string. Defaults to <code>"none"</code> for no conversion.</p></dd>


<dt>tran</dt>
<dd><p>A function to transform the y-axis. Options include log, log2, log10, sqrt.</p></dd>


<dt>format_lab</dt>
<dd><p>Formatting option for y-axis labels. Options include 
<code>"decimal"</code> or <code>"scientific"</code>.</p></dd>


<dt>value</dt>
<dd><p>Whether to calculate raw <code>"count"</code> or <code>"percent"</code> of total catch.</p></dd>


<dt>position</dt>
<dd><p>Positioning of bar plot. Options include 'stack', 'dodge', 
and 'fill'.</p></dd>


<dt>combine</dt>
<dd><p>Whether to combine variables listed in <code>group</code>. This is passed
to the "fill" or "color" aesthetic for plots.</p></dd>


<dt>scale</dt>
<dd><p>Scale argument passed to <code>facet_grid</code>. Defaults to <code>"fixed"</code>.</p></dd>


<dt>output</dt>
<dd><p>Return output as <code>"plot"</code>, <code>"table"</code>, or both <code>"tab_plot"</code>. Defaults 
to both (<code>"tab_plot"</code>).</p></dd>


<dt>format_tab</dt>
<dd><p>How table output should be formatted. Options include 'wide' 
(the default) and 'long'.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p><code>weekly_catch()</code> aggregates catch by week using one or more columns 
  of catch data. When multiple catch variables are entered, a new column "species" 
  is created and used to group values in plots. 
  The "species" column can also be used to split (or facet) the plot. For table output,
  the "species" column will be kept if <code>format_tab = "long"</code>, i.e. a column of
  species names ("species") and a column containing catch ("catch"). When</p>
<p></p>
<p><code>format_tab = "wide"</code>, each species is given its own column of catch.  
  The data can be filtered by date and/or by a variable. <code>filter_date</code></p>
 

<p>specifies the type of date filter to apply--by date-range or by period.</p>
<p></p>
<p><code>date_value</code> should contain the values to filter the data by. To filter 
  by a variable, enter its name as a string in <code>filter_by</code> and include the 
  values to filter by in <code>filter_value</code>. Up to two grouping variables can 
  be entered. Grouping variables can be merged into one variable using <code>combine</code>; 
  in this case any number of variables can be joined, but no more than three is 
  recommended. For faceting, any variable (including ones listed in <code>group</code>) 
  can be used, but "year", "month", "week" are also available provided a date 
  variable is added to <code>sub_date</code>. Currently, combined variables cannot be 
  faceted. A list containing a table and plot are printed to the console and 
  viewer by default.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="fu">weekly_catch</span><span class="op">(</span><span class="va">pollockMainDataTable</span>,</span></span>
<span class="r-in"><span>  species <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"HAUL_LBS_270_POLLOCK_LBS"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"HAUL_LBS_110_PACIFIC_COD_LBS"</span>,  <span class="st">"HAUL_LBS_OTHER_LBS"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>, date <span class="op">=</span> <span class="st">"DATE_FISHING_BEGAN"</span>,</span></span>
<span class="r-in"><span>  conv <span class="op">=</span> <span class="st">"tons"</span>, year <span class="op">=</span> <span class="fl">2011</span>, output <span class="op">=</span> <span class="st">"plot"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Lisa Pfeiffer, Paul G Carvalho, Anna Abelman, Min-Yang Lee, Melanie Harsch, Bryce McManus, Alan Haynie.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

